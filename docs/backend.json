{
  "entities": {
    "Aluno": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Aluno",
      "type": "object",
      "description": "Representa um aluno da academia.",
      "properties": {
        "id": { "type": "string", "description": "ID único do aluno, geralmente o UID do Firebase Auth." },
        "nomeCompleto": { "type": "string", "description": "Nome completo do aluno." },
        "cpf": { "type": "string", "description": "CPF do aluno." },
        "email": { "type": "string", "description": "Email do aluno.", "format": "email" },
        "telefone": { "type": "string", "description": "Telefone de contato do aluno." },
        "dataNascimento": { "type": "string", "description": "Data de nascimento do aluno.", "format": "date-time" },
        "dataCadastro": { "type": "string", "description": "Data de cadastro do aluno.", "format": "date-time" },
        "fotoUrl": { "type": "string", "description": "URL da foto de perfil do aluno.", "format": "uri" },
        "biometriaHash": { "type": "string", "description": "Hash biométrico para controle de acesso." },
        "statusMatricula": { "type": "string", "enum": ["ATIVA", "INADIMPLENTE", "INATIVA"], "description": "Status atual da matrícula do aluno." }
      },
      "required": ["id", "nomeCompleto", "cpf", "email", "dataCadastro", "statusMatricula"]
    },
    "Plano": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Plano",
      "type": "object",
      "description": "Representa um plano de matrícula oferecido pela academia.",
      "properties": {
        "id": { "type": "string", "description": "ID único do plano." },
        "nome": { "type": "string", "description": "Nome do plano (ex: Plano Mensal)." },
        "preco": { "type": "number", "description": "Preço do plano." },
        "duracaoDias": { "type": "number", "description": "Duração do plano em dias." }
      },
      "required": ["id", "nome", "preco", "duracaoDias"]
    },
    "Matricula": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Matricula",
      "type": "object",
      "description": "Representa a matrícula de um aluno em um plano específico.",
      "properties": {
        "id": { "type": "string", "description": "ID único da matrícula." },
        "alunoId": { "type": "string", "description": "ID do aluno matriculado." },
        "planoId": { "type": "string", "description": "ID do plano contratado." },
        "dataInicio": { "type": "string", "description": "Data de início da matrícula.", "format": "date-time" },
        "dataVencimento": { "type": "string", "description": "Data de vencimento da matrícula.", "format": "date-time" },
        "status": { "type": "string", "enum": ["ATIVA", "VENCIDA"], "description": "Status da matrícula." }
      },
      "required": ["id", "alunoId", "planoId", "dataInicio", "dataVencimento", "status"]
    },
    "Pagamento": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Pagamento",
      "type": "object",
      "description": "Registra um pagamento realizado por um aluno.",
      "properties": {
        "id": { "type": "string", "description": "ID único do pagamento." },
        "matriculaId": { "type": "string", "description": "ID da matrícula associada ao pagamento." },
        "alunoId": { "type": "string", "description": "ID do aluno que realizou o pagamento." },
        "valor": { "type": "number", "description": "Valor pago." },
        "dataPagamento": { "type": "string", "description": "Data do pagamento.", "format": "date-time" },
        "metodo": { "type": "string", "enum": ["PIX", "Dinheiro", "Cartão"], "description": "Método de pagamento." }
      },
      "required": ["id", "matriculaId", "alunoId", "valor", "dataPagamento", "metodo"]
    },
    "Treino": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Treino",
      "type": "object",
      "description": "Representa um plano de treino para um aluno.",
      "properties": {
        "id": { "type": "string", "description": "ID único do treino." },
        "alunoId": { "type": "string", "description": "ID do aluno a quem o treino pertence." },
        "instrutorId": { "type": "string", "description": "ID do instrutor que criou o treino. Pode ser o UID do aluno ou 'IA'." },
        "objetivo": { "type": "string", "description": "Objetivo do treino (ex: Hipertrofia)." },
        "dataCriacao": { "type": "string", "description": "Data de criação do treino.", "format": "date-time" },
        "diaSemana": { "type": ["number", "null"], "description": "Dia da semana agendado (0-6). Null se não estiver agendado." }
      },
      "required": ["id", "alunoId", "instrutorId", "objetivo", "dataCriacao", "diaSemana"]
    },
    "Exercicio": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Exercicio",
      "type": "object",
      "description": "Representa um exercício dentro de um plano de treino.",
      "properties": {
        "id": { "type": "string", "description": "ID único do exercício no treino." },
        "nomeExercicio": { "type": "string", "description": "Nome do exercício." },
        "series": { "type": "number", "description": "Número de séries." },
        "repeticoes": { "type": "string", "description": "Número de repetições (ex: 10-12)." },
        "observacoes": { "type": "string", "description": "Observações adicionais." },
        "descricao": { "type": "string", "description": "Descrição detalhada do exercício." }
      },
      "required": ["id", "nomeExercicio", "series", "repeticoes"]
    },
    "Funcionario": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Funcionario",
      "type": "object",
      "description": "Representa um funcionário da academia.",
      "properties": {
        "id": { "type": "string", "description": "ID único do funcionário, geralmente o UID do Firebase Auth." },
        "nomeCompleto": { "type": "string", "description": "Nome completo do funcionário." },
        "email": { "type": "string", "description": "Email do funcionário.", "format": "email" },
        "role": { "type": "string", "enum": ["RECEPCIONISTA", "INSTRUTOR", "GERENTE"], "description": "Cargo do funcionário." }
      },
      "required": ["id", "nomeCompleto", "email", "role"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/alunos/{alunoId}": {
      "schema": { "$ref": "#/entities/Aluno" },
      "description": "Armazena dados de cada aluno. A segurança é baseada no ID do aluno."
    },
    "/planos/{planoId}": {
      "schema": { "$ref": "#/entities/Plano" },
      "description": "Catálogo de planos oferecidos pela academia."
    },
    "/alunos/{alunoId}/matriculas/{matriculaId}": {
      "schema": { "$ref": "#/entities/Matricula" },
      "description": "Subcoleção para as matrículas de um aluno."
    },
    "/alunos/{alunoId}/pagamentos/{pagamentoId}": {
      "schema": { "$ref": "#/entities/Pagamento" },
      "description": "Subcoleção para o histórico de pagamentos de um aluno."
    },
    "/alunos/{alunoId}/treinos/{treinoId}": {
      "schema": { "$ref": "#/entities/Treino" },
      "description": "Subcoleção para os treinos de um aluno."
    },
    "/alunos/{alunoId}/treinos/{treinoId}/exercicios/{exercicioId}": {
      "schema": { "$ref": "#/entities/Exercicio" },
      "description": "Subcoleção para os exercícios dentro de um treino específico."
    },
    "/funcionarios/{funcionarioId}": {
      "schema": { "$ref": "#/entities/Funcionario" },
      "description": "Armazena dados dos funcionários. As permissões são baseadas em roles."
    }
  }
}
